<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>03101400component3props</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="app">
      <!-- 리터럴 속성-->
      <my-component text="World"></my-component>
    </div>

    <script>
      //MyComponent를 vue에 등록하는데 이 것은 my-component 붙는다.
      //my-component에 있는 text는 vue에 속해 있는데
      //props에게 쓰겠다고 선언하여서 template에서 text가 출력할 수 있다.
      const MyComponent = {
        template: `<div>{{text}}!!</div>`,
        props: ["text"],
      };
      new Vue({
        el: "#app",
        components: {
          "my-component": MyComponent,
        },
      });
    </script>
    <!--동적속성(동적으로 변하는 데이터) props
    data의 message의 데이터가 div 안의 message로 간다-->

    <div id="app2">
      <my-component :text="message"></my-component>
    </div>

    <script>
      const MyComponent2 = {
        template: `<div> 안녕 {{text}} !! </div>`,
        props: ["text"],
      };

      new Vue({
        el: "#app2",
        components: {
          "my-component": MyComponent2,
        },
        data() {
          return {
            message: "부모 컴포넌트로 부터!!",
          };
        },
      });
    </script>

    <div id="app3">
      <my-component :text="message3"></my-component>
    </div>

    <script>
      const MyComponent3 = {
        template: `<div> 안녕 {{text}} !! </div>`,
        props: ["text"],
      };

      new Vue({
        el: "#app3",
        components: {
          "my-component": MyComponent3,
        },
        data: {
          message3: "약식 부모 컴포넌트로 부터!!",
        },
      });
    </script>

    <div id="app4">
      <my-component></my-component>
    </div>

    <script>
      //vue 외에 정의한 counter를 쓰기 때문에 props를 쓰지 않음.
      const counter = { counter: 0 }; //전역변수 선언
      const MyComponent4 = {
        template: `<div><button v-on:click='counter+=1'>{{counter}}</button></div>`,
        data() {
          return counter;
        },
      };

      new Vue({
        el: "#app4",
        components: { "my-component": MyComponent4 },
        data() {
          {
            return {
              message: "",
            };
          }
        },
      });
    </script>

    <div id="app5">
      <my-component
        :num="Mynumber"
        :str="passedString"
        :even="Mynumber"
        :obj="passedObject"
      ></my-component>
    </div>
    <script>
      const MyComponent5 = {
        template: `<div>숫자 : {{num}} <br> 문자열 : {{str}} <br>
            짝수? :{{even}} <br> 객처 : {{obj.message}}`,
        //원하는 데이터가 들어오는지 props로 속성확인
        props: {
          num: {
            //숫자 검증 : 반드시 존재 해야 한다.
            type: Number, //num 숫자 입력하는 데이터
            required: true, //required 반드시 데이터가 입력되어야 한다.
          },
          str: {
            type: String,
            default: "안녕", //str에 데이터가 없을 시 default 사용
          },
          obj: {
            type: Object,
            default: () => {
              return { message: "안녕 객체로부터" };
            },
          },
          //커스텀 검사(원하는 형태로 검사)-짝수인지 유효성 검사 홀수는 odd
          //유효성검사는 콘솔창(f12)에서만 확인 가능
          //[Vue warn]: Invalid prop: custom validator check failed for prop "even".라고 나옴
          even: {
            validator: (value) => {
              return value % 2 === 0;
              /*= 기호가 3개 연속으로 쓰이는 이유는 비교 연산자 중 하나인 일치 연산자(strict equality operator)입니다.
              이 연산자는 왼쪽 피연산자와 오른쪽 피연산자의 자료형과 값을 모두 비교하여
              일치하면 true, 일치하지 않으면 false를 반환합니다.
              위 코드에서는 value % 2 === 0의 결과가 true인지 아닌지를 검사하고 있습니다.
              즉, value를 2로 나눈 나머지가 0인 경우를 찾고자 하는 것입니다.
              이때, == 이나 != 와 같은 동등 비교 연산자를 사용하면
              자료형 변환으로 인한 오류가 발생할 가능성이 있기 때문에,
              일치 연산자인 === 를 사용하여 자료형과 값이 모두 일치하는지를 엄격하게 검사합니다.
              이렇게 함으로써 예기치 않은 결과를 방지할 수 있습니다.*/
            },
          },
        },
      };

      new Vue({
        el: "#app5",
        components: {
          "my-component": MyComponent5,
        },
        data() {
          return {
            passedString: "안녕 부모로 부터!",
            Mynumber: 43,
            passedObject: { message: "넘겨준 객체" },
          };
        },
      });
    </script>
  </body>
</html>
